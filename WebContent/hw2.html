<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Homework 2</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"></script>

</head>

<body align="center">
 <div id="mapid" style="width: 100%; height: 680px;"></div>
 <br>
 
 <button onclick="displayPoint()"'>Generate Random Point</button>
 <br>
 <button onclick="displayBox()">Generate Random Box</button>
 <hr> 
 
 <div id="result" style="color:red">
 	<p>Results:</p>
 	<p>Most Recent Random Point:</p>
 	<div id="pointLL" style="color:green"></div>
 	<p>Most Recent Random Box: (North,South,East,West)</p>
 	<div id="north" style="color:green"></div>
 	<div id="south" style="color:green"></div>
 	<div id="east" style="color:green"></div>
 	<div id="west" style="color:green"></div>
 </div>
 
 
 
</body>

<script type="text/javascript">
	var latCenter = 33.98;
	var lonCenter = -81.05;
	var baseMapCenter = L.latLng(latCenter, lonCenter);
	var map = L.map('mapid').setView(baseMapCenter, 8);
	var streetLayerUrl = "https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?"+
			"access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw";
	var streetLayer = L.tileLayer(streetLayerUrl,{id: 'mapbox.streets', attribution: "MapBox"});
	map.addLayer(streetLayer);
	
	/*
	NOTE:
		For both these functions I loosely have them centered around Columbia
		by hardcoding in the offset on the random functions. Generalizing on this
		would be trivial, however. 
	*/
	function displayPoint() {
		// Longitute: [-83,-77]
		// Latitude: [32.4, 35.5]
		var ranLat = Math.random()*3.1 + 32.4;
		var ranLon = Math.random()*6 - 83;
		
		console.log(ranLat);
		console.log(ranLon);
		
		var point = L.latLng(ranLat,ranLon);
		document.getElementById("pointLL").innerHTML = point.toString();
		console.log(point.toString());
		circleMarker = L.circleMarker(point, {color:"red", radius:10});
		map.addLayer(circleMarker);
		map.panTo(point);
	}
	
	
	
	function displayBox() {
		
		// this is a realllly quick and dirty way of generating our corner points
		// essentially generate two randoms latitudes and determine N/S
		// repeat for E/W
		var ranBoxLat1 = Math.random()*3.1 + 32.4;
		var ranBoxLat2 = Math.random()*3.1 + 32.4;
		
		var ranBoxLon1 = Math.random()*6 - 83;
		var ranBoxLon2 = Math.random()*6 - 83;
		
		// ternary operator is nice here
		var northLat = (ranBoxLat1 > ranBoxLat2) ? ranBoxLat1 : ranBoxLat2;
		var southLat = (ranBoxLat1 < ranBoxLat2) ? ranBoxLat1 : ranBoxLat2;
		
		
		var westLon = (ranBoxLon1 < ranBoxLon2) ? ranBoxLon1 : ranBoxLon2;
		var eastLon = (ranBoxLon1 > ranBoxLon2) ? ranBoxLon1 : ranBoxLon2;
		
		document.getElementById("north").innerHTML = "North: " + northLat;
		document.getElementById("south").innerHTML = "South: " + southLat;
		
		document.getElementById("east").innerHTML = "East: " + eastLon;
		document.getElementById("west").innerHTML = "West: " + westLon;
		
		var southWest = L.latLng(southLat,westLon);
		var northEast = L.latLng(northLat,eastLon);
		var bbox = L.latLngBounds(southWest,northEast);
		var bboxRect = L.rectangle(bbox);
		bboxRect.setStyle({color:"green"});
		map.addLayer(bboxRect);
		map.fitBounds([southWest, northEast]);  // make sure to pass bounds in as a list
		
	}
	
</script>

</html>
